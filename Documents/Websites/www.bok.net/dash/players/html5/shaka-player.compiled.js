(function(){var h,aa=this;function n(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)c.length||void 0===b?d=d[f]?d[f]:d[f]={}:d[f]=b}function q(a,b){function c(){}c.prototype=b.prototype;a.Yc=b.prototype;a.prototype=new c;a.Vc=function(a,c,e){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function s(a){ba[a]={Ya:ca(),end:NaN}}function u(a){if(a=ba[a])a.end=ca()}function da(a){return(a=ba[a])&&a.end?a.end-a.Ya:NaN}var ca=window.performance?window.performance.now.bind(window.performance):Date.now,ba={};function ea(){this.la=fa++;this.id=null;this.lang="";this.q=0;this.height=this.width=this.bandwidth=null;this.X=this.l="";this.jb=this.Jb=this.Sa=this.C=null}var fa=0;function ga(a){var b=a.l||"";a.X&&(b+='; codecs="'+a.X+'"');return b}function ha(){this.url=null;this.Ka=0;this.Na=null}function ka(){this.contentType="";this.j=[];this.$=[]}function la(){this.duration=this.start=0;this.ka=[]}function ma(){this.q=0;this.Fb=[]};function na(a,b,c){this.id=a;this.bandwidth=b||0;this.lang=c||"unknown";this.active=!1}n("shaka.player.AudioTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0});function oa(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[]}function pa(a){a.playTime+=da("playing")/1E3}function qa(a,b){var c=new ra(b);a.streamHistory.push(new sa(c));if(c.videoHeight||!a.streamStats)a.streamStats=c}
function ra(a){this.videoWidth=a.width;this.videoHeight=a.height;this.videoMimeType=a.l;this.videoBandwidth=a.bandwidth}function sa(a){this.timestamp=Date.now()/1E3;this.value=a};function ta(a,b){this.id=a;this.lang=b||"unknown";this.enabled=this.active=!1}n("shaka.player.TextTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:0});function ua(a,b,c,d){this.id=a;this.bandwidth=b||0;this.width=c||0;this.height=d||0;this.active=!1}function va(a,b){var c=a.width*a.height,d=b.width*b.height;return c<d?-1:c>d?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}n("shaka.player.VideoTrack.compare",va);n("shaka.polyfill.Fullscreen.install",function(){var a=HTMLMediaElement.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullscreen||a.msRequestFullscreen||a.webkitRequestFullscreen});function wa(a,b){if(-1==navigator.userAgent.indexOf("Chrome/")||"com.widevine.alpha"!=a&&"org.w3.clearkey"!=a)return!1;if(void 0==b)return!0;var c=b.split(";")[0];return"video/mp4"!=c&&"video/webm"!=c&&"audio/mp4"!=c&&"audio/webm"!=c?!1:b.split(";")[1]?MediaSource.isTypeSupported(b):!0};function za(){return Promise.reject(Error("The key system specified is not supported."))}function Aa(a){return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Ba(){throw new TypeError("Illegal constructor.");}Ba.isTypeSupported=function(){return!1};n("shaka.polyfill.VideoPlaybackQuality.install",function(){var a=HTMLVideoElement.prototype;a.getVideoPlaybackQuality||(a.getVideoPlaybackQuality=function(){return"webkitDroppedFrameCount"in this?{corruptedVideoFrames:0,droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,creationTime:null,totalFrameDelay:null}:null})});function Ca(a,b){for(var c={},d=0;d<a.length;++d){var f=b?b(a[d]):a[d].toString();c[f]=a[d]}var d=[],e;for(e in c)d.push(c[e]);return d};function Da(a,b){this.g=a;this.zb=b==Ea;this.h=0}var Ea=1;Da.prototype.pa=function(){return this.h<this.g.byteLength};function Fa(a){var b=a.g.getUint8(a.h);a.h+=1;return b}function w(a){var b=a.g.getUint32(a.h,a.zb);a.h+=4;return b}function Ga(a){var b,c;a.zb?(b=a.g.getUint32(a.h,!0),c=a.g.getUint32(a.h+4,!0)):(c=a.g.getUint32(a.h,!1),b=a.g.getUint32(a.h+4,!1));if(2097151<c)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");a.h+=8;return c*Math.pow(2,32)+b}
function Ha(a){if(a.h+16>a.g.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var b=new Uint8Array(a.g.buffer,a.h,16);a.h+=16;return b}function x(a,b){if(a.h+b>a.g.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");a.h+=b};function y(a){this.g=a;this.ua=new Da(a,0)}var Ia=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];y.prototype.pa=function(){return this.ua.pa()};
function z(a){var b;b=Ja(a);if(7<b.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=Ja(a);a:{for(d=0;d<Ia.length;d++)if(Ka(c,Ia[d])){d=!0;break a}d=!1}if(d)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==c.length&&c[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var d=c[0]&(1<<8-c.length)-1,f=1;f<c.length;f++)d=256*d+c[f];c=d;c=
a.ua.h+c<=a.g.byteLength?c:a.g.byteLength-a.ua.h;d=new DataView(a.g.buffer,a.g.byteOffset+a.ua.h,c);x(a.ua,c);return new La(b,d)}function Ja(a){var b=Fa(a.ua),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=Fa(a.ua);return d}function La(a,b){this.id=a;this.g=b}
function Ma(a){if(8<a.g.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==a.g.byteLength&&a.g.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var b=0,c=0;c<a.g.byteLength;c++)var d=a.g.getUint8(c),b=256*b+d;return b};function Na(a){this.Ob=Math.exp(Math.log(.5)/a);this.pb=this.sb=0}Na.prototype.ib=function(a,b){var c=Math.pow(this.Ob,a);this.sb=b*(1-c)+c*this.sb;this.pb+=a};function Oa(a){return a.sb/(1-Math.pow(a.Ob,a.pb))};function A(a){var b=new CustomEvent(a.type,{detail:a.detail,bubbles:!!a.bubbles}),c;for(c in a)b[c]=a[c];return b}function B(a){return new CustomEvent("error",{detail:a,bubbles:!0})};function Pa(a,b,c){D(b);D(c);return c==b||a>=Qa&&c==b.split("-")[0]||a>=Ra&&c.split("-")[0]==b.split("-")[0]?!0:!1}var Qa=1,Ra=2;function D(a){a=a.toLowerCase().split("-");var b=Sa[a[0]];b&&(a[0]=b);return a.join("-")}
var Sa={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function E(){this.ba={}}h=E.prototype;h.push=function(a,b){this.ba.hasOwnProperty(a)?this.ba[a].push(b):this.ba[a]=[b]};h.get=function(a){return(a=this.ba[a])?a.slice():null};function Ta(a){var b=[],c;for(c in a.ba)b.push.apply(b,a.ba[c]);return b}h.remove=function(a,b){var c=this.ba[a];if(c)for(var d=0;d<c.length;++d)c[d]==b&&(c.splice(d,1),--d)};h.keys=function(){var a=[],b;for(b in this.ba)a.push(b);return a};h.clear=function(){this.ba={}};function F(){this.za=new E}F.prototype.r=function(){Ua(this);this.za=null};function G(a,b,c,d){b=new Va(b,c,d);a.za.push(c,b)}F.prototype.Ta=function(a,b){for(var c=this.za.get(b)||[],d=0;d<c.length;++d){var f=c[d];f.target==a&&(f.Ta(),this.za.remove(b,f))}};function Ua(a){for(var b=Ta(a.za),c=0;c<b.length;++c)b[c].Ta();a.za.clear()}function Va(a,b,c){this.target=a;this.type=b;this.Vb=c;this.target.addEventListener(b,c,!1)}
Va.prototype.Ta=function(){this.target&&(this.target.removeEventListener(this.type,this.Vb,!1),this.Vb=this.target=null)};function H(a){this.yb=new E;this.parent=a}H.prototype.addEventListener=function(a,b,c){c||this.yb.push(a,b)};H.prototype.removeEventListener=function(a,b,c){c||this.yb.remove(a,b)};H.prototype.dispatchEvent=function(a){delete a.currentTarget;delete a.srcElement;delete a.target;a.srcElement=null;a.target=this;return Wa(this,a)};
function Wa(a,b){b.currentTarget=a;for(var c=a.yb.get(b.type)||[],d=0;d<c.length;++d){var f=c[d];f.handleEvent?f.handleEvent(b):f.call(a,b)}a.parent&&b.bubbles&&Wa(a.parent,b);return b.defaultPrevented};function Xa(){H.call(this,null);this.tb=new Na(3);this.ec=new Na(10);this.sc=50;this.kc=5E5;this.tc=.5;this.rc=65536}q(Xa,H);Xa.prototype.ib=function(a,b){if(!(b<this.rc)){a=Math.max(a,this.sc);var c=8E3*b/a,d=a/1E3;this.tb.ib(d,c);this.ec.ib(d,c);this.dispatchEvent(A({type:"bandwidth"}))}};function Ya(a){return a.tb.pb<a.tc?a.kc:Math.min(Oa(a.tb),Oa(a.ec))};function I(){var a,b,c=new Promise(function(c,f){a=c;b=f});c.resolve=a;c.reject=b;return c};function J(a,b){return b.bind(a)};function Za(a){return String.fromCharCode.apply(null,a)}n("shaka.util.Uint8ArrayUtils.toString",Za);function $a(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}n("shaka.util.Uint8ArrayUtils.fromString",$a);n("shaka.util.Uint8ArrayUtils.toBase64",function(a,b){var c=window.btoa(Za(a));return void 0==b||b?c:c.replace(/=*$/,"")});function ab(a){return $a(window.atob(a))}n("shaka.util.Uint8ArrayUtils.fromBase64",ab);
n("shaka.util.Uint8ArrayUtils.fromHex",function(a){for(var b=new Uint8Array(a.length/2),c=0;c<a.length;c+=2)b[c/2]=window.parseInt(a.substr(c,2),16);return b});function bb(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d);b+=d}return b}n("shaka.util.Uint8ArrayUtils.toHex",bb);function Ka(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0};function K(a,b,c,d,f,e){this.keySystem=a;this.gc=b;this.Ub=c;this.withCredentials=d;this.Da=[];this.Tb=e;f&&this.Da.push(f)}n("shaka.player.DrmSchemeInfo",K);function cb(){this.maxWidth=this.maxHeight=null}function db(){return new K("",!1,"",!1,null,null)}K.createUnencrypted=db;function eb(a,b){var c=new K(a.keySystem,a.gc,a.Ub,a.withCredentials,null,a.Tb);c.Da=Ca(a.Da.concat(b.Da),function(a){return Array.prototype.join.apply(a.initData)});return c}K.combine=eb;K.prototype.key=function(){return JSON.stringify(this)};function fb(a){try{var b=new gb(a);return Promise.resolve(b)}catch(c){return Promise.reject(c)}}function hb(a){var b=this.mediaKeys;b&&b!=a&&ib(b,null);delete this.mediaKeys;(this.mediaKeys=a)&&ib(a,this);return Promise.resolve()}function jb(){var a=document.getElementsByTagName("video");return a.length?a[0]:document.createElement("video")}
function gb(a){this.xb=this.keySystem=a;"org.w3.clearkey"==a&&(this.xb="webkit-org.w3.clearkey");a=jb();for(var b=["video/mp4","video/webm"],c=0;c<b.length;++c)if(a.canPlayType(b[c],this.xb))return;throw Error("The key system specified is not supported.");}gb.prototype.createMediaKeys=function(){var a=new kb(this.xb);return Promise.resolve(a)};function kb(a){this.Ea=a;this.sa=null;this.c=new F;this.Xb=[];this.cc={}}
function lb(a,b){var c=jb();"org.w3.clearkey"==a&&(a="webkit-org.w3.clearkey");return b?!!c.canPlayType(b,a):!!c.canPlayType("video/mp4",a)||!!c.canPlayType("video/webm",a)}function ib(a,b){a.sa=b;Ua(a.c);b&&(G(a.c,b,"webkitneedkey",a.Jc.bind(a)),G(a.c,b,"webkitkeymessage",a.Ic.bind(a)),G(a.c,b,"webkitkeyadded",a.Gc.bind(a)),G(a.c,b,"webkitkeyerror",a.Hc.bind(a)))}h=kb.prototype;
h.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");a=new mb(this.sa,this.Ea,b);this.Xb.push(a);return a};h.Jc=function(a){a=A({type:"encrypted",initDataType:"cenc",initData:a.initData});this.sa.dispatchEvent(a)};
h.Ic=function(a){var b=nb(this,a.sessionId);b&&(a=A({type:"message",messageType:isNaN(b.expiration)?"licenserequest":"licenserenewal",message:a.message}),b.Q&&(b.Q.resolve(),b.Q=null),b.dispatchEvent(a))};h.Gc=function(a){(a=nb(this,a.sessionId))&&a.ready()};h.Hc=function(a){var b=nb(this,a.sessionId);b&&b.handleError(a)};function nb(a,b){var c=a.cc[b];return c?c:(c=a.Xb.shift())?(c.sessionId=b,a.cc[b]=c):null}
function mb(a,b,c){H.call(this,null);this.sa=a;this.J=this.Q=null;this.Ea=b;this.xa=c;this.sessionId="";this.expiration=NaN;this.closed=new I;this.keyStatuses={}}q(mb,H);h=mb.prototype;h.ready=function(){this.expiration=Number.POSITIVE_INFINITY;this.J&&this.J.resolve();this.J=null};
h.handleError=function(a){var b=Error("EME v0.1b key error");b.errorCode=a.errorCode;b.errorCode.systemCode=a.systemCode;!a.sessionId&&this.Q?(b.method="generateRequest",this.Q.reject(b),this.Q=null):a.sessionId&&this.J&&(b.method="update",this.J.reject(b),this.J=null)};
h.ab=function(a,b,c){if(this.Q)this.Q.then(this.ab.bind(this,a,b,c)).catch(this.ab.bind(this,a,b,c));else{this.Q=a;try{var d;if("persistent"==this.xa)if(c)d=$a("LOAD_SESSION|"+c);else{var f=new Uint8Array(b);d=$a("PERSISTENT|"+Za(f))}else d=new Uint8Array(b);this.sa.webkitGenerateKeyRequest(this.Ea,d)}catch(e){this.Q.reject(e),this.Q=null}}};
h.Nb=function(a,b){if(this.J)this.J.then(this.Nb.bind(this,a,b)).catch(this.Nb.bind(this,a,b));else{this.J=a;var c,d;if("webkit-org.w3.clearkey"==this.Ea){c=Za(new Uint8Array(b));d=JSON.parse(c);c=d.keys[0].kty;if("A128KW"!=d.keys[0].alg||"oct"!=c)this.J.reject(Error("Response is not a valid JSON Web Key Set.")),this.J=null;c=ab(d.keys[0].k);d=ab(d.keys[0].kid)}else c=new Uint8Array(b),d=null;try{this.sa.webkitAddKey(this.Ea,c,d,this.sessionId)}catch(f){this.J.reject(f),this.J=null}}};
h.generateRequest=function(a,b){var c=new I;this.ab(c,b,null);return c};h.load=function(a){if("persistent"==this.xa){var b=new I;this.ab(b,null,a);return b}return Promise.reject(Error('The session type is not "persistent".'))};h.update=function(a){var b=new I;this.Nb(b,a);return b};
h.close=function(){if("persistent"!=this.xa){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.sa.webkitCancelKeyRequest(this.Ea,this.sessionId)}this.closed.resolve();return this.closed};h.remove=function(){return"persistent"!=this.xa?Promise.reject(Error("Not a persistent session.")):this.close()};n("shaka.polyfill.MediaKeys.install",function(){HTMLMediaElement.prototype.webkitGenerateKeyRequest?(Navigator.prototype.requestMediaKeySystemAccess=fb,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.waitingFor="",HTMLMediaElement.prototype.setMediaKeys=hb,window.MediaKeys=kb,window.MediaKeys.isTypeSupported=lb):Navigator.prototype.requestMediaKeySystemAccess?MediaKeys.isTypeSupported||(MediaKeys.isTypeSupported=wa):(Navigator.prototype.requestMediaKeySystemAccess=za,HTMLMediaElement.prototype.mediaKeys=
null,HTMLMediaElement.prototype.waitingFor="",HTMLMediaElement.prototype.setMediaKeys=Aa,window.MediaKeys=Ba,window.MediaKeys.isTypeSupported=Ba.isTypeSupported)});function ob(a){this.systemIds=[];this.cencKeyIds=[];for(a=new Da(new DataView(a.buffer),0);a.pa();){var b=8,c=w(a),d=w(a);1==c&&(c=Ga(a),b+=8);if(1886614376!=d)x(a,c-b);else if(d=Fa(a),1<d)x(a,c-b-1);else{x(a,3);b=bb(Ha(a));if(0<d)for(c=w(a),d=0;d<c;++d){var f=bb(Ha(a));this.cencKeyIds.push(f)}c=w(a);x(a,c);this.systemIds.push(b)}}};var pb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function L(a){var b;a instanceof L?(qb(this,a.ia),this.ya=a.ya,this.Z=a.Z,rb(this,a.Ha),this.T=a.T,sb(this,a.ta.clone()),this.oa=a.oa):a&&(b=String(a).match(pb))?(qb(this,b[1]||"",!0),this.ya=M(b[2]||""),this.Z=M(b[3]||"",!0),rb(this,b[4]),this.T=M(b[5]||"",!0),sb(this,b[6]||"",!0),this.oa=M(b[7]||"")):this.ta=new tb(null)}h=L.prototype;h.ia="";h.ya="";h.Z="";h.Ha=null;h.T="";h.oa="";
h.toString=function(){var a=[],b=this.ia;b&&a.push(ub(b,vb,!0),":");if(b=this.Z){a.push("//");var c=this.ya;c&&a.push(ub(c,vb,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.Ha;null!=b&&a.push(":",String(b))}if(b=this.T)this.Z&&"/"!=b.charAt(0)&&a.push("/"),a.push(ub(b,"/"==b.charAt(0)?wb:xb,!0));(b=this.ta.toString())&&a.push("?",b);(b=this.oa)&&a.push("#",ub(b,yb));return a.join("")};
h.resolve=function(a){var b=this.clone(),c=!!a.ia;c?qb(b,a.ia):c=!!a.ya;c?b.ya=a.ya:c=!!a.Z;c?b.Z=a.Z:c=null!=a.Ha;var d=a.T;if(c)rb(b,a.Ha);else if(c=!!a.T){if("/"!=d.charAt(0))if(this.Z&&!this.T)d="/"+d;else{var f=b.T.lastIndexOf("/");-1!=f&&(d=b.T.substr(0,f+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var f=0==d.lastIndexOf("/",0),d=d.split("/"),e=[],g=0;g<d.length;){var k=d[g++];"."==k?f&&g==d.length&&e.push(""):".."==k?((1<e.length||1==e.length&&""!=e[0])&&
e.pop(),f&&g==d.length&&e.push("")):(e.push(k),f=!0)}d=e.join("/")}}c?b.T=d:c=""!==a.ta.toString();c?sb(b,M(a.ta.toString())):c=!!a.oa;c&&(b.oa=a.oa);return b};h.clone=function(){return new L(this)};function qb(a,b,c){a.ia=c?M(b,!0):b;a.ia&&(a.ia=a.ia.replace(/:$/,""))}function rb(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.Ha=b}else a.Ha=null}function sb(a,b,c){b instanceof tb?a.ta=b:(c||(b=ub(b,zb)),a.ta=new tb(b))}
function M(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function ub(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Ab),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ab(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var vb=/[#\/\?@]/g,xb=/[\#\?:]/g,wb=/[\#\?]/g,zb=/[\#\?@]/g,yb=/#/g;function tb(a){this.fa=a||null}h=tb.prototype;h.L=null;h.Za=null;
h.add=function(a,b){if(!this.L&&(this.L={},this.Za=0,this.fa))for(var c=this.fa.split("&"),d=0;d<c.length;d++){var f=c[d].indexOf("="),e=null,g=null;0<=f?(e=c[d].substring(0,f),g=c[d].substring(f+1)):e=c[d];e=decodeURIComponent(e.replace(/\+/g," "));g=g||"";this.add(e,decodeURIComponent(g.replace(/\+/g," ")))}this.fa=null;(c=this.L.hasOwnProperty(a)&&this.L[a])||(this.L[a]=c=[]);c.push(b);this.Za++;return this};
h.toString=function(){if(this.fa)return this.fa;if(!this.L)return"";var a=[],b;for(b in this.L)for(var c=encodeURIComponent(b),d=this.L[b],f=0;f<d.length;f++){var e=c;""!==d[f]&&(e+="="+encodeURIComponent(d[f]));a.push(e)}return this.fa=a.join("&")};h.clone=function(){var a=new tb;a.fa=this.fa;if(this.L){var b={},c;for(c in this.L)b[c]=this.L[c].concat();a.L=b;a.Za=this.Za}return a};function Bb(){this.duration=this.b=this.type=this.id=null;this.q=5;this.p=[]}function Cb(){this.id=null;this.q=5;this.w=this.u=this.t=this.b=this.duration=this.start=null;this.K=[]}function Db(){this.id=null;this.q=5;this.w=this.u=this.t=this.b=this.X=this.l=this.height=this.width=this.contentType=this.lang=null;this.Y=[];this.m=[]}function Eb(){this.contentType=this.lang=this.id=null}
function Fb(){this.lang=this.id=null;this.q=5;this.w=this.u=this.t=this.b=this.X=this.l=this.height=this.width=this.bandwidth=null;this.Y=[]}function Gb(){this.value=this.schemeIdUri=null;this.children=[];this.pssh=null}function Hb(){this.parsedPssh=this.psshBox=null}function N(){this.url=null}function O(){this.ga=this.N=this.vb=this.C=this.b=null}function Ib(){this.U=this.url=null}function Jb(){this.U=this.url=null}
function P(){this.b=null;this.R=1;this.ha=0;this.ca=null;this.aa=1;this.ga=null;this.P=[]}function Kb(){this.duration=this.startTime=this.gb=this.C=null}function Lb(){this.R=1;this.ha=0;this.ca=null;this.aa=1;this.Lb=this.wb=this.cb=this.ra=null}function Mb(){this.ic=[]}function Nb(){this.repeat=this.duration=this.startTime=null}function Ob(a,b){this.Ya=a;this.end=b}Bb.TAG_NAME="MPD";Cb.TAG_NAME="Period";Db.TAG_NAME="AdaptationSet";Eb.TAG_NAME="ContentComponent";Fb.TAG_NAME="Representation";
Gb.TAG_NAME="ContentProtection";Hb.TAG_NAME="cenc:pssh";N.TAG_NAME="BaseURL";O.TAG_NAME="SegmentBase";Ib.TAG_NAME="RepresentationIndex";Jb.TAG_NAME="Initialization";P.TAG_NAME="SegmentList";Kb.TAG_NAME="SegmentURL";Lb.TAG_NAME="SegmentTemplate";Mb.TAG_NAME="SegmentTimeline";Nb.TAG_NAME="S";
Bb.prototype.parse=function(a,b){this.id=Q(b,"id",R);this.type=Q(b,"type",R);this.duration=Q(b,"mediaPresentationDuration",Pb);this.q=Q(b,"minBufferTime",Pb)||5;var c=S(this,b,N);this.b=T(a.b,c?c.url:null);this.p=U(this,b,Cb)};Cb.prototype.parse=function(a,b){this.id=Q(b,"id",R);this.start=Q(b,"start",Pb);this.duration=Q(b,"duration",Pb);this.q=a.q;var c=S(this,b,N);this.b=T(a.b,c?c.url:null);this.t=S(this,b,O);this.u=S(this,b,P);this.w=S(this,b,Lb);this.K=U(this,b,Db)};
Db.prototype.parse=function(a,b){var c=S(this,b,Eb)||{};this.id=Q(b,"id",R);this.lang=Q(b,"lang",R)||c.lang;this.contentType=Q(b,"contentType",R)||c.contentType;this.width=Q(b,"width",V);this.height=Q(b,"height",V);this.l=Q(b,"mimeType",R);this.X=Q(b,"codecs",R);this.lang&&(this.lang=D(this.lang));this.q=a.q;c=S(this,b,N);this.b=T(a.b,c?c.url:null);this.Y=U(this,b,Gb);!this.contentType&&this.l&&(this.contentType=this.l.split("/")[0]);this.t=S(this,b,O)||a.t;this.u=S(this,b,P)||a.u;this.w=S(this,b,
Lb)||a.w;this.m=U(this,b,Fb);!this.l&&this.m.length&&(this.l=this.m[0].l,!this.contentType&&this.l&&(this.contentType=this.l.split("/")[0]))};Eb.prototype.parse=function(a,b){this.id=Q(b,"id",R);this.lang=Q(b,"lang",R);this.contentType=Q(b,"contentType",R);this.lang&&(this.lang=D(this.lang))};
Fb.prototype.parse=function(a,b){this.id=Q(b,"id",R);this.bandwidth=Q(b,"bandwidth",V);this.width=Q(b,"width",V)||a.width;this.height=Q(b,"height",V)||a.height;this.l=Q(b,"mimeType",R)||a.l;this.X=Q(b,"codecs",R)||a.X;this.lang=a.lang;this.q=a.q;var c=S(this,b,N);this.b=T(a.b,c?c.url:null);this.Y=U(this,b,Gb);this.t=S(this,b,O)||a.t;this.u=S(this,b,P)||a.u;this.w=S(this,b,Lb)||a.w;0==this.Y.length&&(this.Y=a.Y)};
Gb.prototype.parse=function(a,b){this.schemeIdUri=Q(b,"schemeIdUri",R);this.value=Q(b,"value",R);this.pssh=S(this,b,Hb);this.children=b.children};Hb.prototype.parse=function(a,b){var c=Qb(b);if(c){this.psshBox=ab(c);try{this.parsedPssh=new ob(this.psshBox)}catch(d){if(!(d instanceof RangeError))throw d;}}};N.prototype.parse=function(a,b){this.url=Qb(b)};
O.prototype.parse=function(a,b){this.C=this.b=a.b;this.vb=Q(b,"indexRange",Rb);this.N=S(this,b,Ib);this.ga=S(this,b,Jb);this.N?this.N.U||(this.N.U=this.vb):(this.N=new Ib,this.N.url=this.b,this.N.U=this.vb)};Ib.prototype.parse=function(a,b){var c=Q(b,"sourceURL",R);this.url=T(a.b,c);this.U=Q(b,"range",Rb)};Jb.prototype.parse=function(a,b){var c=Q(b,"sourceURL",R);this.url=T(a.b,c);this.U=Q(b,"range",Rb)};
P.prototype.parse=function(a,b){this.b=a.b;this.R=Q(b,"timescale",V)||1;this.ha=Q(b,"presentationTimeOffset",W)||0;this.ca=Q(b,"duration",W);var c=Q(b,"startNumber",W);this.aa=null==c?1:c;this.ga=S(this,b,Jb);this.P=U(this,b,Kb)};Kb.prototype.parse=function(a,b){var c=Q(b,"media",R);this.C=T(a.b,c);this.gb=Q(b,"mediaRange",Rb)};
Lb.prototype.parse=function(a,b){this.R=Q(b,"timescale",V)||1;this.ha=Q(b,"presentationTimeOffset",W)||0;this.ca=Q(b,"duration",W);var c=Q(b,"startNumber",W);this.aa=null==c?1:c;this.ra=Q(b,"media",R);this.cb=Q(b,"index",R);this.wb=Q(b,"initialization",R);this.Lb=S(this,b,Mb)};Mb.prototype.parse=function(a,b){this.ic=U(this,b,Nb)};Nb.prototype.parse=function(a,b){this.startTime=Q(b,"t",W);this.duration=Q(b,"d",W);this.repeat=Q(b,"r",W)};
function T(a,b){var c=b?new L(b):null;return a?c?a.resolve(c):a:c}function S(a,b,c){for(var d=null,f=0;f<b.children.length;f++)if(b.children[f].tagName==c.TAG_NAME){if(d)return null;d=b.children[f]}if(!d)return null;b=new c;b.parse.call(b,a,d);return b}function U(a,b,c){for(var d=[],f=0;f<b.children.length;f++)if(b.children[f].tagName==c.TAG_NAME){var e=new c;e.parse.call(e,a,b.children[f]);d.push(e)}return d}function Qb(a){a=a.firstChild;return a.nodeType!=Node.TEXT_NODE?null:a.nodeValue}
function Q(a,b,c){return c(a.getAttribute(b))}function Pb(a){if(!a)return null;var b=/^P(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!b)return null;a=0;var c=W(b[1]);c&&(a+=86400*c);(c=W(b[2]))&&(a+=3600*c);(c=W(b[3]))&&(a+=60*c);b=window.parseFloat(b[4]);(b=isNaN(b)?null:b)&&(a+=b);return a}function Rb(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=W(b[1]);if(null==a)return null;b=W(b[2]);return null==b?null:new Ob(a,b)}
function V(a){a=window.parseInt(a,10);return 0<a?a:null}function W(a){a=window.parseInt(a,10);return 0<=a?a:null}function R(a){return a};function Sb(a,b,c,d,f,e){this.index=a;this.startTime=b;this.endTime=c;this.Ka=d;this.Na=f;this.url=e};function Tb(a){this.Fa=a}Tb.prototype.parse=function(a,b,c){a=null;try{a=this.Eb(b,c)}catch(d){if(!(d instanceof RangeError))throw d;}return a};
Tb.prototype.Eb=function(a,b){var c=new Da(a,0),d=[],f=w(c);if(1936286840!=w(c))return null;1==f&&(f=Ga(c));var e=Fa(c);x(c,3);x(c,4);var g=w(c);if(0==g)return null;var k,l;0==e?(k=w(c),l=w(c)):(k=Ga(c),l=Ga(c));x(c,2);e=c.g.getUint16(c.h,c.zb);c.h+=2;f=b+f+l;for(l=0;l<e;l++){var p=w(c),m=(p&2147483648)>>>31,p=p&2147483647,r=w(c);w(c);if(1==m)return null;d.push(new Sb(l,k/g,(k+r)/g,f,f+p-1,this.Fa));k+=r;f+=p}return d};function Ub(a){this.Kc=a};function Vb(a){this.i=a}function Wb(a,b){return 0>b||b>=a.i.length?null:a.i[b]}function Xb(a,b,c){var d=Yb(a,b);if(0>d)return null;for(var f=[];d<a.i.length;d++){f.push(a.i[d]);var e=a.i[d].endTime;if(!e||e>b+c)break}return new Ub(f)}function Yb(a,b){for(var c=0;c<a.i.length;c++)if(a.i[c].startTime>b)return c?c-1:0;return a.i.length-1};function Zb(a){this.Pa=a;this.eb=new ma}
Zb.prototype.Gb=function(a){this.eb=new ma;for(var b=0;b<a.p.length;++b)for(var c=a.p[b],d=0;d<c.K.length;++d){var f=c.K[d];if("text"!=f.contentType)for(var e=0;e<f.m.length;++e){var g=f.m[e],k=0,k=k+(g.t?1:0),k=k+(g.u?1:0),k=k+(g.w?1:0);0==k?(f.m.splice(e,1),--e):1!=k&&(g.t?(g.u=null,g.w=null):g.u&&(g.w=null));!g.t||g.t.N&&g.t.N.U&&g.t.C||(f.m.splice(e,1),--e)}}$b(a);for(b=0;b<a.p.length;++b)for(c=a.p[b],d=0;d<c.K.length;++d)for(f=c.K[d],e=0;e<f.m.length;++e)if(g=f.m[e],g.w)if(k=g.w,k.cb){a:{var k=
g,l=k.w,p=new O,m;m=k;var r=m.w;if(r.cb){var t=new Ib;(r=ac(r.cb,m.id,null,m.bandwidth,null))?(t.url=m.b&&r?m.b.resolve(r):r,m=t):m=null}else m=null;p.N=m;if(p.N){p.ga=bc(k);m=void 0;if(l.ra){l=ac(l.ra,k.id,1,k.bandwidth,0);if(!l)break a;m=k.b?k.b.resolve(l):l}else m=k.b;p.C=m;k.t=p}}g.t||(f.m.splice(e,1),--e)}else if(k.Lb){a:if(k=g,p=k.w,p.ra){l=new P;l.R=p.R;l.ha=p.ha;l.aa=p.aa;l.ga=bc(k);l.P=[];m=p.Lb.ic;for(var t=1,r=-1,v=0;v<m.length;++v)for(var C=m[v].repeat||0,xa=0;xa<=C;++xa){if(!m[v].duration)break a;
var ia;ia=m[v].startTime&&0==xa?m[v].startTime:0==v&&0==xa?0:r;if(0<=r&&ia>r)break a;var r=ia+m[v].duration,ja=ac(p.ra,k.id,t-1+p.aa,k.bandwidth,ia);if(!ja)break a;var ja=k.b?k.b.resolve(ja):ja,ya=new Kb;ya.C=ja;ya.startTime=ia;ya.duration=m[v].duration;l.P.push(ya);++t}k.u=l}g.u||(f.m.splice(e,1),--e)}else if(k.ca)if(c.duration){a:if(k=g,p=c.duration,l=k.w,l.ra){m=new P;m.R=l.R;m.ha=l.ha;m.aa=l.aa;m.ga=bc(k);m.P=[];t=1;for(r=0;r/m.R<p;){v=ac(l.ra,k.id,t-1+l.aa,k.bandwidth,r);if(!v)break a;v=k.b?
k.b.resolve(v):v;C=new Kb;C.C=v;C.startTime=r;C.duration=l.ca;m.P.push(C);++t;r+=l.ca}k.u=m}g.u||(f.m.splice(e,1),--e)}else f.m.splice(e,1),--e;else f.m.splice(e,1),--e;$b(a);for(b=0;b<a.p.length;++b)for(c=a.p[b],d=0;d<c.K.length;++d){e=f=c.K[d];g=null;for(k=0;k<e.m.length;++k)(p=e.m[k].l||"",g)?p!=g&&(e.m.splice(k,1),--k):g=p;0==f.m.length&&(c.K.splice(d,1),--d)}this.eb.q=a.q||0;for(b=0;b<a.p.length;++b){c=a.p[b];d=new la;d.start=c.start||0;d.duration=c.duration||0;for(f=0;f<c.K.length;++f){e=c.K[f];
g=new ka;g.contentType=e.contentType||"";for(k=0;k<e.m.length;++k){l=e.m[k];p=g.$.slice(0);r=l;m=p;t=[];if(0==r.Y.length)t.push(db());else if(this.Pa)for(v=0;v<r.Y.length;++v)(C=this.Pa(r.Y[v]))&&t.push(C);if(0==m.length)Array.prototype.push.apply(m,t);else for(r=0;r<m.length;++r){v=!1;for(C=0;C<t.length;++C)if(m[r].key()==t[C].key()){v=!0;break}v||(m.splice(r,1),--r)}if(!(0==p.length&&0<g.$.length)){a:{m=new ea;m.id=l.id;m.lang=l.lang||"";m.q=l.q;m.bandwidth=l.bandwidth;m.width=l.width;m.height=
l.height;m.l=l.l||"";m.X=l.X||"";m.C=l.b;if(l.t)m.C=l.t.C,m.Sa=cc(l.t.N),m.Jb=cc(l.t.ga);else if(l.u&&(m.Jb=cc(l.u.ga),m.jb=this.$a(l.u),!m.jb)){l=null;break a}l=m}l&&(g.j.push(l),g.$=p)}}d.ka.push(g)}this.eb.Fb.push(d)}};
function $b(a){if(a.p.length){"static"==a.type&&null==a.p[0].start&&(a.p[0].start=0);var b=function(a){return 0==a||!!a};1==a.p.length&&!b(a.p[0].duration)&&b(a.duration)&&(a.p[0].duration=a.duration);for(var c=0;c<a.p.length;++c){var d=a.p[c-1],f=a.p[c];dc(f);var e=a.p[c+1]||{start:a.duration};!b(f.start)&&d&&b(d.duration)&&(f.start=d.start+d.duration);!b(f.duration)&&b(e.start)&&(f.duration=e.start-f.start)}c=a.p[a.p.length-1];!b(a.duration)&&b(c.start)&&b(c.duration)&&(a.duration=c.start+c.duration)}}
function dc(a){if(!a.duration){for(var b=null,c=0;c<a.K.length;++c)for(var d=a.K[c],f=0;f<d.m.length;++f){var e=d.m[f];if(e.u){e=e.u;if(e.ca)e=e.ca/e.R*e.P.length;else{for(var g=0,k=0;k<e.P.length;++k)g+=e.P[k].duration;e=g/e.R}b=Math.max(b,e)}}a.duration=b}}function bc(a){var b=a.w;if(!b.wb)return null;var c=new Jb,b=ac(b.wb,a.id,null,a.bandwidth,null);if(!b)return null;c.url=a.b&&b?a.b.resolve(b):b;return c}
function ac(a,b,c,d,f){var e={RepresentationID:b,Number:c,Bandwidth:d,Time:f};a=a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(a,b,c){if("$$"==a)return"$";var d=e[b];if(null==d)return a;"RepresentationID"==b&&c&&(c=void 0);a=d.toString();c=window.parseInt(c,10)||1;c=Math.max(0,c-a.length);return Array(c+1).join("0")+a});try{return new L(a)}catch(g){if(g instanceof URIError)return null;throw g;}}
function cc(a){if(!a)return null;var b=new ha;b.url=a.url;a.U&&(b.Ka=a.U.Ya,b.Na=a.U.end);return b}Zb.prototype.$a=function(a){for(var b=a.R,c=a.ha,d=a.ca,f=[],e=0;e<a.P.length;++e){var g=a.P[e],k=0,l=null,p=0,m=null;if(null!=g.startTime)0<e&&null!=a.P[e-1].startTime&&(k=a.P[e-1].startTime),k=(c+g.startTime)/b,l=k+g.duration/b;else{if(!d)return null;0==e?k=c/b:(k=f[e-1].startTime,k+=d/b);l=k+d/b;g.gb&&(p=g.gb.Ya,m=g.gb.end)}f.push(new Sb(e,k,l,p,m,g.C))}return new Vb(f)};function ec(a,b){H.call(this,a);this.a=b;this.S=this.I=null}q(ec,H);h=ec.prototype;h.r=function(){this.S&&this.a.removeChild(this.S);this.parent=this.a=this.I=this.S=null};h.Sb=function(){return!0};h.start=function(a){this.I=a;a=this.ub();this.S&&(this.mb(!1),this.a.removeChild(this.S));this.S=document.createElement("track");this.a.appendChild(this.S);this.S.src=this.I.C.toString();this.mb(a)};h.Kb=function(a){this.start(a)};h.bc=function(){};h.mb=function(a){this.S.track.mode=a?"showing":"disabled"};
h.ub=function(){return this.S?"showing"==this.S.track.mode:!1};function fc(a){this.Fa=a}fc.prototype.parse=function(a,b){var c=null;try{c=this.Eb(a,b)}catch(d){if(!(d instanceof RangeError))throw d;}return c};
fc.prototype.Eb=function(a,b){var c;var d=new y(a);if(440786851!=z(d).id)c=null;else if(c=z(d),408125543!=c.id)c=null;else{d=c.g.byteOffset;c=new y(c.g);for(var f=null;c.pa();){var e=z(c);if(357149030==e.id){f=e;break}}if(f){c=new y(f.g);for(f=1E6;c.pa();)if(e=z(c),2807729==e.id){f=Ma(e);break}c=f/1E9}else c=null;c=c?{Pc:d,Tc:c}:null}if(!c)return null;f=z(new y(b));if(475249515!=f.id)return null;d=c.Pc;c=c.Tc;for(var f=new y(f.g),e=[],g=-1,k=-1,l=0;f.pa();){var p=z(f);if(187==p.id){var m;m=new y(p.g);
p=z(m);if(179!=p.id)m=null;else if(p=Ma(p),m=z(m),183!=m.id)m=null;else{m=new y(m.g);for(var r=0;m.pa();){var t=z(m);if(241==t.id){r=Ma(t);break}}m={Uc:p,Lc:r}}m&&(p=c*m.Uc,m=d+m.Lc,0<=g&&(e.push(new Sb(l,g,p,k,m-1,this.Fa)),++l),g=p,k=m)}}0<=g&&e.push(new Sb(l,g,null,k,null,this.Fa));return e};function X(a){this.url=a;this.o=new gc;this.Ra=this.fc=this.Pb=0;this.n=null;this.v=new I;this.na=null}function gc(){this.body=null;this.Wb=1;this.jc=1E3;this.Nc=2;this.Oc=.5;this.Mc=0;this.method="GET";this.responseType="arraybuffer";this.Ib={};this.withCredentials=!1}function hc(a){ic(a);a.o.body=null;a.v=null;a.na=null}function ic(a){a.n&&(a.n.onload=null,a.n.onerror=null);a.n=null}
X.prototype.kb=function(){if(this.n)return this.v;if(0==this.url.lastIndexOf("data:",0)){var a=this.url.split(":")[1].split(";").pop().split(","),b=a.pop(),b="base64"==a.pop()?window.atob(b):window.decodeURIComponent(b);"arraybuffer"==this.o.responseType&&(b=$a(b).buffer);a=JSON.parse(JSON.stringify(new XMLHttpRequest));a.response=b;a.responseText=b.toString();b=this.v;b.resolve(a);hc(this);return b}this.Pb++;this.fc=Date.now();this.Ra||(this.Ra=this.o.jc);this.n=new XMLHttpRequest;a=this.url;this.na&&
(a=new L(a),a.ta.add("_",Date.now()),a=a.toString());this.n.open(this.o.method,a,!0);this.n.responseType=this.o.responseType;this.n.timeout=this.o.Mc;this.n.withCredentials=this.o.withCredentials;this.n.onload=this.yc.bind(this);this.n.onerror=this.wc.bind(this);for(b in this.o.Ib)this.n.setRequestHeader(b,this.o.Ib[b]);this.n.send(this.o.body);return this.v};function jc(a,b,c){b=Error(b);b.type=c;b.status=a.n.status;b.url=a.url;b.method=a.o.method;b.body=a.o.body;b.Zc=a.n;return b}
X.prototype.abort=function(){if(this.n&&this.n.readyState!=XMLHttpRequest.DONE){this.n.abort();var a=jc(this,"Request aborted.","aborted");this.v.reject(a);hc(this)}};X.prototype.yc=function(a){this.na&&this.na.ib(Date.now()-this.fc,a.loaded);200<=this.n.status&&299>=this.n.status?(this.v.resolve(this.n),hc(this)):this.Pb<this.o.Wb?(ic(this),window.setTimeout(this.kb.bind(this),this.Ra*(1+(2*Math.random()-1)*this.o.Oc)),this.Ra*=this.o.Nc):(a=jc(this,"HTTP error.","net"),this.v.reject(a),hc(this))};
X.prototype.wc=function(){var a=jc(this,"Network failure.","net");this.v.reject(a);hc(this)};function kc(a){X.call(this,a);this.o.responseType="text"}q(kc,X);kc.prototype.send=function(){var a=this.url;return this.kb().then(function(b){b=b.responseText;if(b=(new DOMParser).parseFromString(b,"text/xml")){var c={b:new L(a)};b=S(c,b,Bb)}else b=null;if(b)return Promise.resolve(b);b=Error("MPD parse failure.");b.type="mpd";return Promise.reject(b)})};function lc(a,b,c){X.call(this,a);this.o.body=b;this.o.method="POST";this.o.Wb=3;this.o.withCredentials=c}q(lc,X);lc.prototype.send=function(){return this.kb().then(function(a){return Promise.resolve(new Uint8Array(a.response))})};function Y(a){H.call(this,null);this.a=a;this.fb=this.d=null;this.c=new F;this.Hb={};this.Aa=[];this.lb=[];this.qa="en";this.Ua=this.hb=null;this.Ma=!1;this.H=new oa;this.La=!0}q(Y,H);n("shaka.player.Player",Y);Y.version="unknown";Y.isBrowserSupported=function(){return!!window.MediaSource&&!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.Promise&&!!HTMLVideoElement.prototype.getVideoPlaybackQuality&&!!HTMLMediaElement.prototype.requestFullscreen&&!!document.body.children};
function mc(a,b){var c;if(0<=b.indexOf("mp4a.40.5"))return!1;"text/vtt"==b?c=!!window.VTTCue:(c=MediaSource.isTypeSupported(b))&&a&&(c=MediaKeys.isTypeSupported(a,b.split(";")[0]));return c}Y.isTypeSupported=mc;Y.prototype.r=function(){this.Mb().catch(function(){});this.c.r();this.a=this.c=null};Y.prototype.destroy=Y.prototype.r;
Y.prototype.Mb=function(){this.a.pause();Ua(this.c);nc(this);oc(this);for(var a=0;a<this.lb.length;++a)this.lb[a].close().catch(function(){});this.lb=[];this.Aa=[];this.fb=null;this.a.src="";this.a.load();a=this.a.setMediaKeys(null);this.d&&(this.d.r(),this.d=null);this.Ma=!1;this.Hb={};this.H=new oa;return a};Y.prototype.unload=Y.prototype.Mb;
Y.prototype.load=function(a){var b=this.d?this.Mb():Promise.resolve();this.a.autoplay&&(s("load"),G(this.c,this.a,"timeupdate",this.xc.bind(this)));a.ea(this.La);return b.then(J(this,function(){return a.load(this.qa)})).then(J(this,function(){this.d=a;return pc(this)})).then(J(this,function(){G(this.c,this.a,"play",this.Bc.bind(this));G(this.c,this.a,"playing",this.Cc.bind(this));G(this.c,this.a,"seeking",this.Db.bind(this));G(this.c,this.a,"pause",this.Ac.bind(this));G(this.c,this.a,"ended",this.vc.bind(this));
return this.d.Wa(this,this.a)})).then(J(this,function(){for(var a=0;a<this.Aa.length;++a)this.Yb(this.Aa[a]);return Promise.resolve()})).catch(J(this,function(b){a.r();this.d=null;var d=B(b);this.dispatchEvent(d);return Promise.reject(b)}))};Y.prototype.load=Y.prototype.load;
function pc(a){var b=a.d.Ba();return b?navigator.requestMediaKeySystemAccess(b.keySystem).then(J(a,function(a){return a.createMediaKeys()})).then(J(a,function(a){this.fb=a;return this.a.setMediaKeys(this.fb)})).then(J(a,function(){this.Aa=[];for(var a=0;a<b.Da.length;++a){var d=b.Da[a];this.Aa.push({type:"encrypted",initDataType:d.initDataType,initData:d.initData})}0==this.Aa.length&&G(this.c,this.a,"encrypted",this.Yb.bind(this))})):Promise.resolve()}h=Y.prototype;
h.Yb=function(a){var b=new Uint8Array(a.initData),c=Array.prototype.join.apply(b);this.d.Ba().gc&&(c="first");this.Hb[c]||(b=this.fb.createSession(),this.lb.push(b),G(this.c,b,"message",this.Dc.bind(this)),b.generateRequest(a.initDataType,a.initData).then(J(this,function(){this.Hb[c]=!0})).catch(J(this,function(a){a=B(a);this.dispatchEvent(a)})))};h.Dc=function(a){var b=this.d.Ba();qc(this,a.target,b.Ub,a.message,b.withCredentials,b.Tb)};
function qc(a,b,c,d,f,e){(new lc(c,d,f)).send().then(J(a,function(a){if(e){var c=new cb;a=e(a,c);this.d.nb(c)}return b.update(a)})).then(function(){}).catch(J(a,function(a){a.Xc=b;a=B(a);this.dispatchEvent(a)}))}h.xc=function(){u("load");this.H.playbackLatency=da("load")/1E3;this.c.Ta(this.a,"timeupdate")};h.Bc=function(){};h.Cc=function(){s("playing");nc(this);this.Ua=window.setTimeout(this.$b.bind(this),100)};h.Db=function(){nc(this);this.Ma=!1};h.Ac=function(){u("playing");pa(this.H)};
h.vc=function(){this.getStats();nc(this)};h.getStats=function(){this.a.paused||(u("playing"),pa(this.H),s("playing"));var a=this.H,b=this.a.getVideoPlaybackQuality();b&&(a.decodedFrames=b.totalVideoFrames,a.droppedFrames=b.droppedVideoFrames);return this.H};Y.prototype.getStats=Y.prototype.getStats;Y.prototype.mc=function(){var a=this.a.videoWidth,b=this.a.videoHeight;return a&&b?{width:a,height:b}:null};Y.prototype.getCurrentResolution=Y.prototype.mc;
Y.prototype.getVideoTracks=function(){return this.d?this.d.getVideoTracks():[]};Y.prototype.getVideoTracks=Y.prototype.getVideoTracks;Y.prototype.getAudioTracks=function(){return this.d?this.d.getAudioTracks():[]};Y.prototype.getAudioTracks=Y.prototype.getAudioTracks;Y.prototype.Ca=function(){return this.d?this.d.Ca():[]};Y.prototype.getTextTracks=Y.prototype.Ca;Y.prototype.wa=function(a){return this.d?this.d.wa(a,!0):!1};Y.prototype.selectVideoTrack=Y.prototype.wa;
Y.prototype.Ia=function(a){return this.d?this.d.Ia(a,!1):!1};Y.prototype.selectAudioTrack=Y.prototype.Ia;Y.prototype.Ja=function(a){return this.d?this.d.Ja(a,!1):!1};Y.prototype.selectTextTrack=Y.prototype.Ja;Y.prototype.ma=function(a){this.d&&this.d.ma(a)};Y.prototype.enableTextTrack=Y.prototype.ma;Y.prototype.ea=function(a){this.La=a;this.d&&this.d.ea(a)};Y.prototype.enableAdaptation=Y.prototype.ea;Y.prototype.nc=function(){return this.a.currentTime};Y.prototype.getCurrentTime=Y.prototype.nc;
Y.prototype.oc=function(){return this.a.duration};Y.prototype.getDuration=Y.prototype.oc;Y.prototype.pc=function(){return this.a.muted};Y.prototype.getMuted=Y.prototype.pc;Y.prototype.qc=function(){return this.a.volume};Y.prototype.getVolume=Y.prototype.qc;Y.prototype.play=function(){this.dc(1);this.a.play()};Y.prototype.play=Y.prototype.play;Y.prototype.pause=function(){this.a.pause()};Y.prototype.pause=Y.prototype.pause;Y.prototype.requestFullscreen=function(){this.a.requestFullscreen()};
Y.prototype.requestFullscreen=Y.prototype.requestFullscreen;Y.prototype.seek=function(a){this.a.currentTime=a};Y.prototype.seek=Y.prototype.seek;Y.prototype.Qc=function(a){this.a.muted=a};Y.prototype.setMuted=Y.prototype.Qc;Y.prototype.Sc=function(a){this.a.volume=a};Y.prototype.setVolume=Y.prototype.Sc;Y.prototype.Rc=function(a){this.qa=D(a)};Y.prototype.setPreferredLanguage=Y.prototype.Rc;Y.prototype.dc=function(a){0!=a&&(oc(this),0<a?this.a.playbackRate=a:(this.a.playbackRate=0,this.Zb(a)))};
Y.prototype.setPlaybackRate=Y.prototype.dc;function oc(a){a.hb&&(window.clearTimeout(a.hb),a.hb=null)}function nc(a){a.Ua&&(window.clearTimeout(a.Ua),a.Ua=null)}Y.prototype.Zb=function(a){this.a.currentTime+=.1*a;this.hb=window.setTimeout(this.Zb.bind(this,a),100)};
Y.prototype.$b=function(){this.Ua=window.setTimeout(this.$b.bind(this),100);var a=this.a.buffered,a=a.length?a.end(a.length-1):0,a=this.a.currentTime-a;this.Ma?a<-this.d.bb()&&(u("buffering"),a=this.H,a.bufferingTime+=da("buffering")/1E3,this.Ma=!1,this.a.play()):.05<a&&(this.Ma=!0,this.a.pause(),this.H.bufferingHistory.push(Date.now()/1E3),s("buffering"))};function rc(){this.G=[];this.ob=0}
rc.prototype.Gb=function(a){for(var b=this.ob=0;b<a.length;++b)this.ob+=a[b].duration;for(b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.ka.length;++d){for(var f=c.ka[d],e=f,g=0;g<e.j.length;++g){for(var k=e.j[g],l=0,p=0;p<e.$.length;++p)mc(e.$[p].keySystem,ga(k))?++l:(e.$.splice(p,1),--p);0==l&&(e.j.splice(g,1),--g)}0==f.j.length&&(c.ka.splice(d,1),--d)}for(b=0;b<a.length;++b)for(c=a[b],d=0;d<c.ka.length;++d)c.ka[d].j.sort(sc);this.G=[];for(b=0;b<a.length;++b){f=a[b];c=new E;e=new E;for(d=0;d<f.ka.length;++d)for(g=
f.ka[d],c.push(g.contentType,g),k=g.$,l=0;l<k.length;++l)e.push(k[l].keySystem,g);f=["audio","video","text"];g=null;e=e.keys();for(d=0;d<f.length;++d)if(k=c.get(f[d])){for(var p=k,l=e,k={},m=0;m<p.length;++m)for(var r=p[m].$,t=0;t<r.length;++t)k[r[t].keySystem]=null;p=void 0;if(!k.hasOwnProperty("")){l=[];p=void 0;for(p in k)l.push(p);l.sort()}k=p=l;if(g){p=l=0;for(m=[];l<g.length&&p<k.length;)if(g[l]<k[p])++l;else if(g[l]>k[p])++p;else if(g[l]==k[p])m.push(g[l]),++l,++p;else throw new TypeError("Cannot intersect non-sortable values!");
g=m}else g=k}if(g){d=g[0];0<=g.indexOf("")&&(d="");c=Ta(c);f=new E;e=null;for(g=0;g<c.length;++g)for(k=c[g],l=k.$,p=0;p<l.length;++p)if(m=l[p],m.keySystem==d||""==m.keySystem)f.push(k.contentType,k),e&&e.keySystem?m.keySystem&&(e=eb(e,m)):e=m;c={ja:f,lc:e};f=c.ja;d=new E;(e=f.get("video"))&&0<e.length&&d.push("video",e[0]);if((g=f.get("audio"))&&0<g.length)for(k=g[0].j[0].l,e=0;e<g.length;++e)g[e].j[0].l==k&&d.push("audio",g[e]);if(f=f.get("text"))for(e=0;e<f.length;++e)d.push("text",f[e]);c.ja=d}else c=
null;c&&this.G.push(c)}};function Z(a,b){var c=a.G[0];return c?b?c.ja.get(b)||[]:Ta(c.ja):[]}function tc(a,b){if(a&&0<a.length)for(var c,d=0;2>=d;++d)if(c=a.filter(function(a){return Pa(d,b,0<a.j.length?a.j[0].lang||"":"")}),c.length)return c;return[]}function sc(a,b){var c=a.bandwidth||Number.MAX_VALUE,d=b.bandwidth||Number.MAX_VALUE;return c<d?-1:c>d?1:0};function uc(a,b){this.B=a;this.d=b;this.c=new F;this.Bb=Date.now()/1E3+4;this.Rb=!0;G(this.c,this.B,"bandwidth",this.Cb.bind(this))}uc.prototype.r=function(){this.c.r();this.d=this.B=this.c=null};uc.prototype.enable=function(a){this.Rb=a};uc.prototype.Cb=function(){if(this.Rb){var a=Date.now()/1E3;if(!(a<this.Bb)){var b=vc(this);if(b){if(b.active){this.Bb=a+3;return}this.d.wa(b.id,!1)}this.Bb=a+8}}};
function vc(a){var b=a.d.getVideoTracks();if(0==b.length)return null;b.sort(va);var c;a:{c=a.d.getAudioTracks();for(var d=0;d<c.length;++d)if(c[d].active){c=c[d];break a}c=null}c=c?c.bandwidth:0;a=Ya(a.B);for(var d=b[0],f=0;f<b.length;++f){var e=b[f],g=f+1<b.length?b[f+1]:{bandwidth:Number.POSITIVE_INFINITY};if(e.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(e.bandwidth+c)/.95&&a<=g&&(d=e,d.active)))break}return d};function wc(a,b,c){H.call(this,null);this.Fa=a;this.hc=b;this.Qb=c;this.W=null}q(wc,H);n("shaka.player.HttpVideoSource",wc);h=wc.prototype;h.r=function(){this.W&&(this.W.parentElement.removeChild(this.W),this.W=null);this.parent=this.Qb=null};h.Wa=function(a,b){this.parent=a;var c=b.mediaKeys;b.src=this.Fa;c=b.setMediaKeys(c);this.hc&&(this.W=document.createElement("track"),this.W.src=this.hc,b.appendChild(this.W),this.W.track.mode="showing");return c};h.Ba=function(){return this.Qb};h.load=function(){return Promise.resolve()};
h.getVideoTracks=function(){return[]};h.getAudioTracks=function(){return[]};h.Ca=function(){return[]};h.bb=function(){return 5};h.wa=function(){return!1};h.Ia=function(){return!1};h.Ja=function(){return!1};h.ma=function(a){this.W&&(this.W.track.mode=a?"showing":"disabled")};h.ea=function(){};h.nb=function(){};function xc(a,b,c){X.call(this,a);if(b||c)this.o.Ib.Range="bytes="+(b+"-"+(null!=c?c:""))}q(xc,X);xc.prototype.send=function(){return this.kb().then(function(a){return Promise.resolve(a.response)})};function yc(a,b,c){this.M=a;this.F=b;this.B=c;this.c=new F;this.Oa=[];this.e=$;this.da=this.v=null;this.i=[];this.V=null;this.va=[];G(this.c,this.F,"updateend",this.Ec.bind(this))}var $=0,zc=1/60;h=yc.prototype;h.r=function(){this.abort();this.v=this.da=this.i=this.V=this.va=this.e=null;this.c.r();this.M=this.F=this.Oa=this.c=null};
function Ac(a,b,c){if(a.e!=$)return a=Error("Cannot fetch: previous operation not complete."),a.type="stream",Promise.reject(a);a.e=1;a.v=new I;a.i=b.Kc;c&&a.va.push(c);b=!0;c=a.i[0].url.toString();for(var d=1;d<a.i.length;++d)if(a.i[d].url.toString()!=c){b=!1;break}(b?Bc(a):Cc(a)).then(J(a,function(){Ya(this.B);this.F.appendBuffer(this.va.shift());this.e=2;this.V=null})).catch(J(a,function(a){"aborted"!=a.type&&Dc(this,a)}));return a.v}
function Bc(a){a.V=new xc(a.i[0].url.toString(),a.i[0].Ka,a.i[a.i.length-1].Na);a.V.na=a.B;return a.V.send().then(a.rb.bind(a))}function Cc(a){function b(a){this.V=new xc(a.url.toString(),a.Ka,a.Na);this.V.na=this.B;return this.V.send()}for(var c=b.bind(a)(a.i[0]),d=a.rb.bind(a),f=1;f<a.i.length;++f)var e=b.bind(a,a.i[f]),c=c.then(d).then(e);return c=c.then(a.rb.bind(a))}h.rb=function(a){this.va.push(a);return Promise.resolve()};
h.clear=function(){if(this.e!=$){var a=Error("Cannot clear: previous operation not complete.");a.type="stream";return Promise.reject(a)}if(0==this.F.buffered.length)return Promise.resolve();try{this.F.remove(0,Number.POSITIVE_INFINITY)}catch(b){return Promise.reject(b)}this.Oa=[];this.e=3;return this.v=new I};h.reset=function(){this.Oa=[]};
h.abort=function(){switch(this.e){case $:return Promise.resolve();case 1:this.e=4;var a=this.da=new I;this.V.abort();Ec(this);return a;case 2:case 3:return this.e=4,this.da=new I,"open"==this.M.readyState&&this.F.abort(),this.da;case 4:return this.da}};h.Ec=function(){switch(this.e){case 2:if(0<this.va.length){try{this.F.appendBuffer(this.va.shift())}catch(a){Dc(this,a)}break}for(var b=0;b<this.i.length;++b)this.Oa[this.i[b].index]=!0;this.i=[];case 3:this.e=$;this.v.resolve();this.v=null;break;case 4:Ec(this)}};
function Ec(a){a.da.resolve();a.da=null;var b=Error("Current operation aborted.");b.type="aborted";Dc(a,b)}function Dc(a,b){a.v.reject(b);a.e=$;a.v=null;a.i=[];a.V=null;a.va=[]};function Fc(a,b,c,d,f){H.call(this,a);this.a=b;this.F=d;this.O=new yc(c,d,f);this.B=f;this.qb=this.Qa=this.D=this.I=null;this.e=Gc;this.xa=""}q(Fc,H);var Gc=0;h=Fc.prototype;h.r=function(){this.e=null;Hc(this);this.B=this.I=this.D=this.Qa=null;this.O.r();this.parent=this.a=this.F=this.O=null};h.Sb=function(){return 5==this.e};
h.start=function(a){if(this.e==Gc){this.I=a;this.xa=a.l.split("/")[0];this.D=null;this.e=1;var b=Ic(this,a);Promise.all(b).then(J(this,function(b){var d=b[0];b=b[1];if(a.Sa){if(this.D=this.$a(a,d,b),!this.D)return b=Error("Failed to create SegmentIndex."),b.type="stream",Promise.reject(b)}else this.D=a.jb;(d=Wb(this.D,0))&&1<=d.startTime&&(this.F.timestampOffset=-d.startTime);return(d=Xb(this.D,this.a.currentTime-this.F.timestampOffset,a.q))?Ac(this.O,d,b):Promise.reject(Error("No segments available."))})).then(J(this,
function(){Jc(this,a);Kc(this)})).catch(J(this,function(a){"aborted"!=a.type&&(this.e=Gc,a=B(a),this.dispatchEvent(a))}))}};
h.Kb=function(a,b){s("switch");s("switch logic");if(this.e!=Gc)if(1==this.e||2==this.e||3==this.e)this.Qa=this.Kb.bind(this,a,b);else if(a==this.I)this.Ga();else{if(b&&a.height&&a.height!=this.I.height){var c=function(b){b.videoHeight==a.height?u("switch"):window.setTimeout(c,50)}.bind(null,this.a);c()}this.e=2;var d=Ic(this,a),f=this.a.paused;b&&(this.a.pause(),Hc(this),d.push(this.O.abort()));var e;Promise.all(d).then(J(this,function(b){var c=b[0];e=b[1];if(a.Sa){if(this.D=this.$a(a,c,e),!this.D)return b=
Error("Failed to create SegmentIndex."),b.type="stream",Promise.reject(b)}else this.D=a.jb;this.I=a;this.xa=a.l.split("/")[0];this.e=3;this.O.reset();Jc(this,a);Hc(this);return this.O.abort()})).then(J(this,function(){var b=Math.max(a.q,15);return(b=Xb(this.D,this.a.currentTime-this.F.timestampOffset,b))?Ac(this.O,b,e):Promise.reject(Error("No segments available."))})).then(J(this,function(){b&&(this.a.currentTime-=.05,f||this.a.play());u("switch logic");Kc(this)})).catch(J(this,function(a){"aborted"!=
a.type&&(a=B(a),this.dispatchEvent(a),this.e=4,this.Ga())}))}};function Jc(a,b){var c=b.l.split("/")[0],c=A({type:"adaptation",bubbles:!0,contentType:c,size:"video"!=c?null:{width:b.width,height:b.height},bandwidth:b.bandwidth});a.dispatchEvent(c)}function Kc(a){a.e=4;if(a.Qa){var b=a.Qa;a.Qa=null;b()}else a.Ga()}
h.bc=function(){this.e!=Gc&&1!=this.e&&2!=this.e&&3!=this.e&&(Hc(this),this.O.abort().then(J(this,function(){var a;a:{a=this.a.currentTime;for(var b=this.O.F.buffered,c=0;c<b.length;++c){var d=b.start(c)-zc,f=b.end(c)+zc;if(a>=d&&a<=f){a=!0;break a}}a=!1}return a?Promise.resolve():this.O.clear()})).then(J(this,function(){this.e=4;this.Ga()})))};h.mb=function(){};h.ub=function(){return!0};function Ic(a,b){return[Lc(a,b.Sa),Lc(a,b.Jb)]}
function Lc(a,b){if(!b||!b.url)return Promise.resolve(null);var c=new xc(b.url.toString(),b.Ka,b.Na);c.na=a.B;return c.send()}h.$a=function(a,b,c){var d=null;if(0<=a.l.indexOf("mp4"))d=new Tb(a.C);else if(0<=a.l.indexOf("webm")){if(!c)return null;d=new fc(a.C)}else return null;c=c?new DataView(c):null;b=new DataView(b);return(a=d.parse(c,b,a.Sa.Ka))?new Vb(a):null};
h.Ga=function(){Hc(this);var a=this.a.currentTime-this.F.timestampOffset,b=Mc(this,a);if(b=Wb(this.D,b)){var c=Math.max(this.I.q,15);b.startTime-a>=c?this.qb=window.setTimeout(this.Ga.bind(this),1E3):Ac(this.O,new Ub([b])).then(J(this,function(){this.Ga()})).catch(J(this,function(a){"aborted"!=a.type&&(a=B(a),this.dispatchEvent(a))}))}else this.e=5,a=A({type:"ended"}),this.dispatchEvent(a)};function Mc(a,b){for(var c=Yb(a.D,b);0<=c&&c<a.D.i.length&&a.O.Oa[c];)c++;return c}
function Hc(a){a.qb&&(window.clearTimeout(a.qb),a.qb=null)};function Nc(a){H.call(this,null);this.Ab=a;this.ac=0;this.s=new rc;this.M=new MediaSource;this.a=null;this.A={};this.c=new F;this.Xa=new I;this.qa="";this.B=new Xa;this.H=null;this.Va=new uc(this.B,this)}q(Nc,H);n("shaka.player.StreamVideoSource",Nc);h=Nc.prototype;h.r=function(){this.c.r();this.c=null;this.Va.r();this.Va=null;Oc(this);this.parent=this.B=this.Xa=this.a=this.M=this.s=this.A=null};
h.Wa=function(a,b){if(0==this.s.G.length||0==Z(this.s).length){var c=Error("Manifest has not been loaded.");c.type="stream";return Promise.reject(c)}this.parent=a;this.a=b;this.H=a.getStats();G(this.c,this.M,"sourceopen",this.zc.bind(this));G(this.c,this.a,"seeking",this.Db.bind(this));G(this.c,this.B,"bandwidth",this.Cb.bind(this));c=this.a.mediaKeys;this.a.src=window.URL.createObjectURL(this.M);c=this.a.setMediaKeys(c);return Promise.all([this.Xa,c])};
h.Ba=function(){if(0==this.s.G.length)return null;var a;return(a=(a=this.s.G[0])?a.lc:null)&&a.keySystem?a:null};h.load=function(a){this.qa=a;if(0==this.Ab.Fb.length)return a=Error("The manifest contains no stream information."),a.type="stream",Promise.reject(a);this.ac=this.Ab.q;this.s.Gb(this.Ab.Fb);return 0==this.s.G.length||0==Z(this.s).length?(a=Error("The manifest specifies content that cannot be displayed on this browser/platform."),a.type="stream",Promise.reject(a)):Promise.resolve()};
h.getVideoTracks=function(){if(0==this.s.G.length)return[];for(var a=this.A.video,a=(a=a?a.I:null)?a.la:0,b=[],c=Z(this.s,"video"),d=0;d<c.length;++d)for(var f=c[d],e=0;e<f.j.length;++e){var g=f.j[e],k=g.la,g=new ua(k,g.bandwidth,g.width,g.height);k==a&&(g.active=!0);b.push(g)}return b};
h.getAudioTracks=function(){if(0==this.s.G.length)return[];for(var a=this.A.audio,a=(a=a?a.I:null)?a.la:0,b=[],c=Z(this.s,"audio"),d=0;d<c.length;++d)for(var f=c[d],e=0;e<f.j.length;++e){var g=f.j[e],k=g.la,g=new na(k,g.bandwidth,g.lang);k==a&&(g.active=!0);b.push(g)}return b};
h.Ca=function(){if(0==this.s.G.length)return[];for(var a=this.A.text,b=a?a.I:null,b=b?b.la:0,c=[],d=Z(this.s,"text"),f=0;f<d.length;++f)for(var e=d[f],g=0;g<e.j.length;++g){var k=e.j[g],l=k.la,k=new ta(l,k.lang);l==b&&(k.active=!0,k.enabled=a.ub());c.push(k)}return c};h.bb=function(){return this.ac};h.wa=function(a,b){return Pc(this,"video",a,b)};h.Ia=function(a,b){return Pc(this,"audio",a,b)};h.Ja=function(a,b){return Pc(this,"text",a,b)};h.ma=function(a){var b=this.A.text;b&&b.mb(a)};h.ea=function(a){this.Va.enable(a)};
h.nb=function(a){for(var b=this.s,c=b.G.length,d=0;d<c;++d)for(var f=b.G[d].ja,e=f.keys(),g=0;g<e.length;++g)for(var k=f.get(e[g]),l=0;l<k.length;++l)for(var p=k[l],m=0;m<p.j.length;++m){var r=p.j[m],t=!1;a.maxWidth&&r.width>a.maxWidth&&(t=!0);a.maxHeight&&r.height>a.maxHeight&&(t=!0);t&&(p.j.splice(m,1),--m)}};
function Pc(a,b,c,d){if(0==a.s.G.length||!a.A[b])return!1;for(var f=Z(a.s,b),e=0;e<f.length;++e)for(var g=f[e],k=0;k<g.j.length;++k){var l=g.j[k];if(l.la==c)return qa(a.H,l),a.A[b].Kb(l,d),!0}return!1}
h.zc=function(){this.c.Ta(this.M,"sourceopen");this.M.duration=this.s.ob;var a;a=this.qa;var b=this.s.G[0];if(b){var c=[],d=b.ja.get("video");d&&0<d.length&&c.push(d[0]);if((d=b.ja.get("audio"))&&0<d.length){var f=tc(d,a);c.push(0<f.length?f[0]:d[0])}(b=b.ja.get("text"))&&0<b.length&&(a=tc(b,a),c.push(0<a.length?a[0]:b[0]));a=c}else a=[];c={};for(b=0;b<a.length;++b){d=a[b];f=d.j[0];if("video"==d.contentType){var e;e=(e=vc(this.Va))?e.id:null;for(var g=0;g<d.j.length&&(f=d.j[g],f.la!=e);++g);}else"audio"==
d.contentType&&(f=d.j[Math.floor(d.j.length/2)]);qa(this.H,f);if("text"==d.contentType)e=new ec(this,this.a);else a:{e=ga(f);g=void 0;try{g=this.M.addSourceBuffer(e)}catch(k){Oc(this);e=Error("Failed to create stream for "+e+".");e.type="stream";e.Wc=k;this.Xa.reject(e);e=null;break a}e=new Fc(this,this.a,this.M,g,this.B)}if(!e)return;this.A[d.contentType]=e;c[d.contentType]=f}for(var l in this.A)e=this.A[l],G(this.c,e,"ended",this.Fc.bind(this)),e.start(c[l]);l=!0;(c=c.audio)&&Pa(2,this.qa,c.lang||
this.qa)&&(l=!1);this.ma(l);this.Xa.resolve()};function Oc(a){for(var b in a.A)a.A[b].r();a.A={}}h.Fc=function(){if("open"==this.M.readyState){for(var a in this.A)if(!this.A[a].Sb())return;this.M.endOfStream()}};h.Db=function(){for(var a in this.A)this.A[a].bc()};h.Cb=function(){var a=this.H,b=Ya(this.B);a.estimatedBandwidth=b;a.bandwidthHistory.push(new sa(b))};function Qc(a,b){H.call(this,null);this.uc=a;this.Pa=b;this.f=null;this.La=!0}q(Qc,H);n("shaka.player.DashVideoSource",Qc);h=Qc.prototype;h.r=function(){this.f&&(this.f.r(),this.f=null);this.parent=this.Pa=null};h.Wa=function(a,b){if(!this.f){var c=Error("Manifest has not been loaded.");c.type="stream";return Promise.reject(c)}return this.f.Wa(a,b)};h.Ba=function(){return this.f.Ba()};
h.load=function(a){return(new kc(this.uc)).send().then(J(this,function(b){var c=new Zb(this.Pa);c.Gb(b);this.f=new Nc(c.eb);this.f.ea(this.La);return this.f.load(a)}))};h.getVideoTracks=function(){return this.f?this.f.getVideoTracks():[]};h.getAudioTracks=function(){return this.f?this.f.getAudioTracks():[]};h.Ca=function(){return this.f?this.f.Ca():[]};h.bb=function(){return this.f?this.f.bb():0};h.wa=function(a,b){return this.f?this.f.wa(a,b):!1};h.Ia=function(a,b){return this.f?this.f.Ia(a,b):!1};
h.Ja=function(a,b){return this.f?this.f.Ja(a,b):!1};h.ma=function(a){this.f&&this.f.ma(a)};h.ea=function(a){this.La=a;this.f&&this.f.ea(a)};h.nb=function(a){this.f&&this.f.nb(a)};}.bind(window))()
